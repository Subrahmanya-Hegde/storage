# Storage

Simple application which provides the functionality to store and retrieve the files.

## Development

When starting the application `docker compose up` is called and the app will connect to the contained services.
[Docker](https://www.docker.com/get-started/) must be available on the current system.

During development it is recommended to use the profile `local`. In IntelliJ `-Dspring.profiles.active=local` can be
added in the VM options of the Run Configuration after enabling this property in "Modify options". Create your own
`application-local.yml` file to override settings for development.

Lombok must be supported by your IDE. For IntelliJ install the Lombok plugin and enable annotation processing -
[learn more](https://bootify.io/next-steps/spring-boot-with-lombok.html).

After starting the application it is accessible under `localhost:8080`.

## Build

The application can be built using the following command:

```
gradlew clean build
```

Start your application with the following command - here with the profile `production`:

```
java -Dspring.profiles.active=production -jar ./build/libs/storage-0.0.1-SNAPSHOT.jar
```

If required, a Docker image can be created with the Spring Boot plugin. Add `SPRING_PROFILES_ACTIVE=production` as
environment variable when running the container.

```
gradlew bootBuildImage --imageName=com.hegde/storage
```

## Usage
 Please check the [swagger](localhost:8080/swagger-ui.html) once the server is up for the usage.

## Further readings

* [Gradle user manual](https://docs.gradle.org/)
* [Spring Boot reference](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/)
* [Spring Data MongoDB reference](https://docs.spring.io/spring-data/mongodb/reference/)

## Learnings

### Open API
- Make sure to use the `useJakartaEe: "true",` and `useSpringBoot3: "true"` if you are using sprinboot 3.x. Because
  javax validation is deprecated and moved to jakarta after 2.x version. We need to use jakarta validations in
  springboot 3.x.
- Source set should be added and make sure the folder which is generated by the open api as source.
- Open API generates all the code and it will have it's own main class where main function will be there.
  So we need to specify the main class which we want to use, generally the main class we created not the open api.

More details can be found in [build file](./build.gradle)